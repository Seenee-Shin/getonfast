<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties>
	<!-- 예약정보 등록 -->
	<entry key="insertRes">
		INSERT INTO RESERVE VALUES (?, ?, ?, ?, ?, ?, ?, DEFAULT, DEFAULT, ?, DEFAULT, ?, ?)
	</entry>
	
	<!-- 다음 예약번호 조회 -->
	<entry key="nextResNo">
		SELECT RESERVE_SEQ_NO.NEXTVAL FROM DUAL
	</entry>
	
	<!-- 예약정보 조회 -->
	<entry key="selectResList">
		SELECT RES_NO, USE_DATE, RES_DT, SPACE_ROOM_NM, SPACE_ROOM_PRICE, SPACE_NM, SPACE_IMG_PATH, SPACE_IMG_NM 
		FROM RESERVE JOIN SPACE_ROOM USING(SPACE_ROOM_NO) JOIN SPACE USING(SPACE_NO) JOIN SPACE_IMG USING(SPACE_NO) 
		WHERE MEMBER_NO = ? AND SPACE_IMG_LEVEL = 1
	</entry>
	
	<!-- 예약정보 상세 조회 -->
	<entry key="selectRes">
		SELECT RES_NO, RES_PERSONNEL, RES_NM, RES_PNO, RES_EMAIL, RES_PURPOSE, RES_REQ, PAY_DATE, USE_DATE, RES_DT, 
		SPACE_ROOM_NM, SPACE_ROOM_PRICE, SPACE_NM, REFUND_POLICY, SPACE_ADDR, SPACE_PNO, 
		SPACE_MAP_IMG, SPACE_MAP_PATH, SPACE_IMG_PATH, SPACE_IMG_NM FROM RESERVE 
		JOIN SPACE_ROOM USING(SPACE_ROOM_NO) JOIN SPACE USING(SPACE_NO) JOIN SPACE_IMG USING(SPACE_NO) 
		WHERE RES_NO = ? AND SPACE_IMG_LEVEL = 1
	</entry>
	
	<!-- 결제취소 상태값 변경 -->
	<entry key="updateDt">
		UPDATE RESERVE SET RES_DT = 32 WHERE RES_NO = ?
	</entry>
	
	<!-- 공간 상세 이용 후기 작성 여부 -->
	<entry key="selectResReview">
		SELECT * FROM (
		    SELECT RES_NO, SPACE_NO, MEMBER_NO, RES_DT, REV_NO
		    FROM RESERVE
		    JOIN SPACE_ROOM USING(SPACE_ROOM_NO)
		    JOIN SPACE USING(SPACE_NO)
		    LEFT JOIN REVIEW USING(RES_NO)
		    WHERE MEMBER_NO = ?
		    AND SPACE_NO = ?
		    ORDER BY RES_DT DESC
		)
		WHERE ROWNUM = 1
	</entry>
</properties>